<VirtualHost *:80>

  ServerAdmin contact@DOMAIN.EXTENTION
  ServerName synak.DOMAIN.EXTENTION
  ServerAlias www.synak.DOMAIN.EXTENTION
  DocumentRoot /var/www/SYNAK_WEB_PANEL_FOLDER

  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

  Redirect permanent / https://synak.DOMAIN.EXTENTION/

</VirtualHost>

<VirtualHost *:443>

  ServerAdmin contact@DOMAIN.EXTENTION
  ServerName synak.DOMAIN.EXTENTION
  ServerAlias www.synak.DOMAIN.EXTENTION
  DocumentRoot /var/www/SYNAK_WEB_PANEL_FOLDER

  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

  SSLEngine on

  SSLCertificateFile /etc/letsencrypt/live/synak.DOMAIN.EXTENTION/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/synak.DOMAIN.EXTENTION/privkey.pem
  SSLCertificateChainFile /etc/letsencrypt/live/synak.DOMAIN.EXTENTION/chain.pem

  SetEnvIf Origin "^http(s)?://(.+\.)?DOMAIN\.EXTENTION$" AccessControlAllowOrigin=$0
  Header set Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin
 
#  Header set Access-Control-Allow-Origin: "http*://synak.DOMAIN.EXTENTION"
  Header always set Access-Control-Allow-Headers "X-RD, X-TP, X-AUTH"

  Options -Indexes +FollowSymLinks +MultiViews +ExecCGI
  PassEnv LANG
  AddHandler cgi-script .py

  <Directory "/var/www/SYNAK_WEB_PANEL_FOLDER/scripts">
    Options ExecCGI
    AllowOverride None
    Require all granted
  </Directory>

</VirtualHost>
